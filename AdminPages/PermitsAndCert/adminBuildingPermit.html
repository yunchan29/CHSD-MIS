<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHSD MIS</title>
    <link rel="stylesheet" href="/Stylesheets/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .modal-backdrop {
            z-index: 1040 !important; /* Ensure the z-index is set correctly */
        }

        /* CSS for the content container */
        .content {
            flex: 1; /* Take remaining space */
            overflow: hidden; /* Hide overflow content */
            display: flex; /* Use flexbox */
            flex-direction: column; /* Column layout */
        }

        .content-container {
            overflow-y: auto; /* Enable vertical scrolling */
            padding: 20px; /* Add some padding */
        }

        .wide-modal {
            max-width: 80%;
        }

        .form-control {
            margin-bottom: 1rem; /* Add margin between form controls */
        }

        .form-check {
            margin-bottom: 0.5rem; /* Add margin between checkboxes */
        }

        .row.g-3 .col-md-6,
        .row.g-3 .col-md-4,
        .row.g-3 .col-md-12 {
            margin-bottom: 1rem; /* Add margin to columns */
        }

        .d-flex .me-2 {
            margin-right: 1rem; /* Add margin to the right of the input */
        }

        .modal-content {
            padding: 1.2rem !important;
        }

        @media(max-width: 991px) {
            .wide-modal {
                width: 100%;
                margin: auto;
            }
        }
    </style>
</head>

<body>
    <div class="main-container d-flex">
        <div class="sideNav" id="side_nav">
            <div class="header-box text-center px-2 pt-3 pb-4">
                <button class="btn d-md-none d-block close-btn px-1 py-0 text-black"><i
                        class="fa-solid fa-bars-staggered"></i></button>
            </div>
            <ul class="sideBarList list-unstyled px-2">
                <li class="sideNav"><a href="/AdminPages/PermitsAndCert/adminDashboardP&C.html"
                        class="text-decoration-none"><i class="fa-solid fa-house"></i> Dashboard</a></li>
                <li class="sideNav active"><a href="/AdminPages/PermitsAndCert/adminBuildingPermit.html"
                        class="text-decoration-none"><i class="fa-solid fa-building-circle-check"></i> Building
                        Permit</a></li>
                <li class="sideNav"><a href="/AdminPages/PermitsAndCert/adminCertofOcc.html"
                        class="text-decoration-none"><i class="fa-solid fa-person-shelter"></i> Occupancy
                        Permit</a></li>
                <li class="sideNav"><a href="/AdminPages/PermitsAndCert/adminCertofElec.html"
                        class="text-decoration-none"><i class="fa-solid fa-bolt"></i> Electrical Inspection</a></li>
                <li class="sideNav"><a href="/AdminPages/PermitsAndCert/adminPCNotif.html"
                        class="text-decoration-none"><i class="fa-solid fa-bell"></i> Notifications</a></li>
                <li class="sideNav"><a href="/AdminPages/PermitsAndCert/adminPCArchive.html"
                        class="text-decoration-none"><i class="fa-solid fa-box-archive"></i> Archive</a></li>
                <li class="sideNav"><a href="/AdminPages/PermitsAndCert/adminPCUserManager.html"
                        class="text-decoration-none"><i class="fa-solid fa-user-pen"></i> User Manager</a></li>
                <li class="sideNav"><a id="admin-logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Log
                        out</a></li>
            </ul>
        </div>

        <div class="content">
            <!-- Navigation Bar -->
            <nav class="navigationBar navbar navbar-expand-lg bg-light">
                <div class="container-fluid">
                    <!-- Mobile View -->
                    <div class="d-flex justify-content-between d-md-none d-block">
                        <a class="navbar-brand d-flex align-items-center" href="#">
                            <img src="/resources/pictures/chsd.png" alt="CHSD" width="40" height="40"
                                class="me-2">
                            <h5 class="mb-0 fs-5">CHSD</h5>
                        </a>
                        <button class="btn px-1 py-0 open-btn">
                            <i class="fa-solid fa-bars-staggered"></i>
                        </button>
                    </div>

                    <!-- Desktop View -->
                    <div class="collapse navbar-collapse d-none d-md-flex" id="navbarSupportedContent">
                        <a class="navbar-brand d-flex align-items-center" href="#">
                            <img src="/resources/pictures/chsd.png" alt="CHSD" width="75" height="75"
                                class="me-2">
                            <h5 class="mb-0 fs-5 fs-lg-4">City Housing and Settlements Department</h5>
                        </a>
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <!-- Additional nav items go here -->
                        </ul>
                    </div>
                </div>
            </nav>

            <div class="contentContainer">
                <h4 class="text-center">Building Permit</h4>
                <div class="container">
                    <h5>Profile</h5>
                    <div class="row mt-4">
                        <div class="col">
                            <a class="btn btn-dark text-white" data-bs-toggle="modal"
                                data-bs-target="#buildingPermitModal"><i class="fa-solid fa-plus"></i> Add
                                Profile</a>
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#viewDetailsModal">
                                Check Remarks
                            </button>
                        </div>

                        <div class="d-flex justify-content-end mb-3">
                            <input type="text" class="form-control search-bar" id="searchInput" placeholder="Search">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="button"><i
                                        class="fas fa-search"></i></button>
                            </div>
                        </div>

                        <div id="buildingPermitDiv">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Owner</th>
                                        <th>Representative</th>
                                        <th>Submitted at</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Profile rows will be loaded here -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination Controls -->
                        <div class="pagination-controls text-center">
                            <button id="prevPageBtn" class="btn btn-primary" disabled>Previous</button>
                            <span id="pageInfo"></span>
                            <button id="nextPageBtn" class="btn btn-primary">Next</button>
                        </div>

                        <!-- Application Modal -->
                        <div class="modal fade" id="buildingPermitModal" tabindex="-1"
                            aria-labelledby="BuildingPermitModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable wide-modal">
                                <div class="modal-content buldingPermitApplication">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="BuildingPermitModalLabel"><i
                                                class="fa-solid fa-user"></i> Application</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="container">
                                            <div class="step-progress mb-4">
                                                <div class="step completed">
                                                    <div class="circle"></div>
                                                    <div class="label">Form</div>
                                                </div>
                                                <div class="step">
                                                    <div class="circle"></div>
                                                    <div class="label">Order of Payment</div>
                                                </div>
                                                <div class="step">
                                                    <div class="circle"></div>
                                                    <div class="label">Certificate</div>
                                                </div>
                                            </div>
                                            <form id="editPermitForm">
                                                <div class="mb-3">
                                                    <div class="d-flex col-md-6">
                                                        <input type="text" class="form-control me-2" id="hsdFormNo"
                                                            placeholder="HSD Form No.">
                                                        <input type="email" class="form-control"
                                                            id="ownerEmail"
                                                            placeholder="Applicant Email(Autogenerated)"
                                                            required>
                                                        <button type="button" class="btn btn-secondary"
                                                            onclick="window.print();"><i
                                                                class="fa-solid fa-print"></i> Print</button>
                                                    </div>
                                                </div>
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <input type="text" class="form-control"
                                                            id="buildingPermitNo" placeholder="Building Permit No.">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="input-group">
                                                            <span class="input-group-text"
                                                                id="basic-addon3">Issued on:</span>
                                                            <input type="date" class="form-control" id="basic-url"
                                                                aria-describedby="basic-addon3 basic-addon4">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="phoneNumber" class="form-label">Phone Number</label>
                                                    <input type="text" class="form-control" id="phoneNumber"
                                                        required>
                                                </div>
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <input type="text" class="form-control" id="addressTelNo"
                                                            placeholder="Address and Tel No.">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="text" class="form-control"
                                                            id="projectLocation" placeholder="Project Location">
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <div class="row g-3">
                                                        <label for="form-check" class="form-label">Scope of Work</label>
                                                        <div class="col-md-6">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="option1" id="option1">
                                                                <label class="form-check-label" for="option1">New
                                                                    Construction</label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="option2" id="option2">
                                                                <label class="form-check-label" for="option2">Addition</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="option3" id="option3">
                                                                <label class="form-check-label" for="option3">Repair
                                                                    Renovation</label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="option4" id="option4">
                                                                <label class="form-check-label" for="option4">Others</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <div class="row g-3">
                                                        <label for="form-check" class="form-label">Project Justification</label>
                                                        <div class="col-md-4">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="justification1" id="justification1">
                                                                <label class="form-check-label"
                                                                    for="justification1">Single
                                                                    Attached/Semi-Attached/Duplex</label>
                                                            </div>
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="justification2" id="justification2">
                                                                <label class="form-check-label"
                                                                    for="justification2">Single/Detached</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox"
                                                                    value="justification3" id="justification3">
                                                                <label class="form-check-label"
                                                                    for="justification3">Row
                                                                    House/Multi-family Dwelling</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mb-3">
                                                        <div class="col">
                                                            <input type="text" class="form-control"
                                                                placeholder="Block number, Lot number">
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <input type="text" class="form-control"
                                                                placeholder="No. of Units">
                                                        </div>
                                                        <div class="col">
                                                            <input type="text" class="form-control"
                                                                placeholder="Floor Area Per Unit">
                                                        </div>
                                                        <div class="col">
                                                            <input type="text" class="form-control"
                                                                placeholder="Total Floor Area">
                                                        </div>
                                                        <div class="col">
                                                            <input type="text" class="form-control"
                                                                placeholder="Total Estimated Cost">
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary"
                                            data-bs-toggle="modal" data-bs-target="#orderOfPaymentModal">
                                            Next
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End of Application Modal -->

                      <!-- View Details Modal -->
<div class="modal fade" id="viewDetailsModal" tabindex="-1" aria-labelledby="viewDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewDetailsModalLabel">Permit Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Owner Name:</strong> <span id="permitOwnerName"></span></p>
                <p><strong>Issued On:</strong> <span id="issuedOnDate"></span></p>
                <div class="mb-3">
                 <div class="col-md-6 align-items-center">
                    <label for="statusSelect" class="form-label">Status</label>
                    <select id="statusSelect" class="form-select" disabled>
                        <option value="Pending">Pending</option>
                        <option value="Processing">Processing</option>
                        <option value="To Pay">To Pay</option>
                        <option value="For Approval">For Approval</option>
                        <option value="For Release">For Release</option>
                        <option value="Claimed">Claimed</option>
                    </select>
                 </div>
                 <button class="btn btn-primary mt-2 mb-2">View HSD Form</button><br>
                 <button class="btn btn-primary mt-2 mb-2">View File Uploads</button>
                 <p><strong>Appointment Date</strong>:----</p>
                 <div class="row">
                    <div class="col">
                        <label for="officerRemarks">Comments</label>
                        <textarea class="form-control" id="officerRemarks" rows="2">
                          
                        </textarea>
                    </div>
                 </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" id="approveBtn">Approve</button>
                <button type="button" class="btn btn-danger">Disapprove</button>
                <button type="button" id="saveStatusBtn" class="btn btn-primary" disabled>Save</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

                        <!-- End of View Details Modal -->

                        <script type="module" src="/Database/firebase.js"></script>

                        <script type="module">
                               import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getAuth } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
      import { getFirestore, collection, getDocs, updateDoc, doc, getDoc, addDoc, setDoc, deleteDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
  
      // Firebase configuration
      const firebaseConfig = {
          apiKey: "AIzaSyBhvoPidRWGeJmnN2E11SBS5n8oyxVLJ0M",
          authDomain: "chsd-mis.firebaseapp.com",
          projectId: "chsd-mis",
          storageBucket: "chsd-mis.appspot.com",
          messagingSenderId: "694967679357",
          appId: "1:694967679357:web:65cffd50f13739f934f414",
          measurementId: "G-XBQTQFRLJ5"
      };
  
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);
  
                            // Function to show notification
function showNotification(message, type) {
    alert(`Showing notification: ${message}`); // Debugging line
    const notificationContainer = document.getElementById('notification-container');
    if (notificationContainer) {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        notificationContainer.appendChild(notification);
    } else {
        console.error('Notification container not found.');
    }
}

let profilesPerPage = 5; // Set how many profiles you want to load per page
let currentPage = 1; // Start with the first page
let totalPages = 1; // Total number of pages will be calculated

// Function to load building permits and display them in the table
async function loadProfiles() {
    try {
        const querySnapshot = await getDocs(collection(db, "buildingPermits"));
        const buildingPermitDiv = document.getElementById("buildingPermitDiv");
        const prevPageBtn = document.getElementById("prevPageBtn");
        const nextPageBtn = document.getElementById("nextPageBtn");
        const pageInfo = document.getElementById("pageInfo");

        if (!buildingPermitDiv) {
            console.error("buildingPermitDiv not found in the DOM.");
            return;
        }

        const tableBody = buildingPermitDiv.querySelector("tbody");
        if (!tableBody) {
            console.error("Table body not found in buildingPermitDiv.");
            return;
        }

        tableBody.innerHTML = ""; // Clear existing rows

        // Convert querySnapshot to array and ensure uniqueness
        const permitsData = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        const uniquePermitsData = Array.from(new Set(permitsData.map(a => a.id)))
            .map(id => permitsData.find(a => a.id === id));

        // Sort by createdAt field
        uniquePermitsData.sort((a, b) => (a.createdAt?.seconds || 0) - (b.createdAt?.seconds || 0));

        // Calculate total pages
        totalPages = Math.ceil(uniquePermitsData.length / profilesPerPage);

        // Calculate the start and end indexes for the current page
        const start = (currentPage - 1) * profilesPerPage;
        const end = start + profilesPerPage;

        // Get the profiles for the current page
        const currentProfiles = uniquePermitsData.slice(start, end);

        // Loop through the current page's profiles
        for (const data of currentProfiles) {
            const row = document.createElement("tr");

            // Fetch representative user data
            let representativeName = "";
            if (data.ownerUid) {
                try {
                    const userRef = doc(db, "users", data.ownerUid);
                    const userDoc = await getDoc(userRef);
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        representativeName = `${userData.firstName} ${userData.lastName}`;
                    }
                } catch (error) {
                    console.error("Error fetching user data:", error);
                }
            }

            const createdAt = data.createdAt ? new Date(data.createdAt.seconds * 1000).toLocaleString() : "";

            row.innerHTML = `
                <td>${data.ownerName}</td>
                <td>${representativeName}</td>
                <td>${createdAt}</td>
                <td>
                    <button class="btn btn-primary btn-sm view-details-btn" data-permit-id="${data.id}">View Details</button>
                </td>
            `;

            tableBody.appendChild(row);

            // Add event listener for the View Details button
            const viewDetailsBtn = row.querySelector(".view-details-btn");
            if (viewDetailsBtn) {
                viewDetailsBtn.addEventListener("click", () => {
                    openViewDetailsModal(data);
                });
            }
        }

        // Update the page info text
        pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;

        // Disable "Previous" button on the first page
        prevPageBtn.disabled = currentPage === 1;

        // Disable "Next" button on the last page
        nextPageBtn.disabled = currentPage === totalPages;

    } catch (error) {
        console.error("Error loading profiles:", error);
    }
}

function openViewDetailsModal(permitData) {
    // Populate the modal with permit data
    document.getElementById("permitOwnerName").textContent = permitData.ownerName;
    document.getElementById("issuedOnDate").textContent = permitData.issuedOn;

    // Set the status select to the current status
    document.getElementById("statusSelect").value = permitData.status;

    // Disable status select and save button by default
    document.getElementById("statusSelect").disabled = true;
    document.getElementById("saveStatusBtn").disabled = true;

    // Show the modal using Bootstrap's Modal instance
    const viewDetailsModal = new bootstrap.Modal(document.getElementById('viewDetailsModal'));
    viewDetailsModal.show();

    // Add event listener for the Approve button
    document.getElementById("approveBtn").onclick = () => {
        document.getElementById("statusSelect").disabled = false; // Enable status selection
        document.getElementById("saveStatusBtn").disabled = false; // Enable save button
    };

    // Add event listener for the Save button
    document.getElementById("saveStatusBtn").onclick = async () => {
        const newStatus = document.getElementById("statusSelect").value;
        try {
            // Update the status in Firestore
            await updateDoc(doc(db, 'buildingPermits', permitData.id), { status: newStatus });

            // Trigger notification
            const message = `${permitData.ownerName}'s building permit is now ${newStatus.toLowerCase()}`;
            showNotification(message, 'info');

            // Store the notification in Firestore
            await addDoc(collection(db, "notifications"), {
                userId: permitData.ownerUid,
                message: message,
                permitId: permitData.id,
                timestamp: serverTimestamp(),
                read: false
            });

            loadProfiles(); // Reload profiles to reflect changes
            viewDetailsModal.hide(); // Hide modal after update
        } catch (error) {
            console.error("Error updating permit status:", error);
            alert("Failed to update permit status.");
        }
    };
}

document.addEventListener("DOMContentLoaded", () => {
    const prevPageBtn = document.getElementById("prevPageBtn");
    const nextPageBtn = document.getElementById("nextPageBtn");

    if (prevPageBtn && !prevPageBtn.hasEventListener) { // Avoid multiple listeners
        prevPageBtn.addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--; // Decrement the current page
                loadProfiles(); // Load profiles for the new page
            }
        });
        prevPageBtn.hasEventListener = true;
    }

    if (nextPageBtn && !nextPageBtn.hasEventListener) { // Avoid multiple listeners
        nextPageBtn.addEventListener("click", () => {
            if (currentPage < totalPages) {
                currentPage++; // Increment the current page
                loadProfiles(); // Load profiles for the new page
            }
        });
        nextPageBtn.hasEventListener = true;
    }

    loadProfiles(); // Load profiles initially
});


                            // Function to search permits by owner name or representative name
                            function searchPermits() {
                                const searchInput = document.getElementById("searchInput").value.toLowerCase();
                                const tableRows = document.querySelectorAll("#buildingPermitDiv tbody tr");

                                tableRows.forEach(row => {
                                    const ownerName = row.querySelector("td:nth-child(1)").textContent.toLowerCase();
                                    const representativeName = row.querySelector("td:nth-child(2)").textContent.toLowerCase();

                                    if (ownerName.includes(searchInput) || representativeName.includes(searchInput)) {
                                        row.style.display = "";
                                    } else {
                                        row.style.display = "none";
                                    }
                                });
                            }

                            // Event listener for search input
                            document.getElementById("searchInput").addEventListener("input", searchPermits);
                        </script>

                        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
                            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
                            crossorigin="anonymous"></script>
                        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
                            integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
                            crossorigin="anonymous"></script>
                        <script src="https://kit.fontawesome.com/8d1b0b1c7b.js" crossorigin="anonymous"></script>
                        <!--Navigation Bar-->
                        <script>
                            document.querySelector('.open-btn').addEventListener('click', function () {
                                document.getElementById('side_nav').classList.add('active');
                            });

                            document.querySelector('.close-btn').addEventListener('click', function () {
                                document.getElementById('side_nav').classList.remove('active');
                            });
                        </script>

                        <!-- Toggle Others -->
                        <script>
                            function toggleOtherScopeInput() {
                                const otherInput = document.getElementById("otherScopeInput");
                                const otherRadio = document.getElementById("option4");

                                if (otherRadio.checked) {
                                    otherInput.disabled = false;
                                } else {
                                    otherInput.disabled = true;
                                    otherInput.value = '';  // Clear the input if disabled
                                }
                            }

                            // Call the function on page load to ensure the state is correct
                            window.onload = toggleOtherScopeInput;
                        </script>

                       
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
