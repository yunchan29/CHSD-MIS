<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHSD MIS</title>
    <link rel="stylesheet" href="/Stylesheets/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   
    <style>
        /* CSS for the content container */
        .content {
            flex: 1; /* Take remaining space */
            overflow: hidden; /* Hide overflow content */
            display: flex; /* Use flexbox */
            flex-direction: column; /* Column layout */
        }

        .content-container {
            overflow-y: auto; /* Enable vertical scrolling */
            padding: 20px; /* Add some padding */
        }

        .wide-modal {
            max-width: 80%;
        }

        .form-control {
            margin-bottom: 1rem; /* Add margin between form controls */
        }

        .form-check {
            margin-bottom: 0.5rem; /* Add margin between checkboxes */
        }

        .row.g-3 .col-md-6,
        .row.g-3 .col-md-4,
        .row.g-3 .col-md-12 {
            margin-bottom: 1rem; /* Add margin to columns */
        }

        .d-flex .me-2 {
            margin-right: 1rem; /* Add margin to the right of the input */
        }

        .form-step {
    display: none; /* Hide all steps by default */
}
.form-step.active {
    display: block; /* Show the active step */
}

.required-asterisk {
    color: red !important; 
    font-weight: bold !important; 
    font-size: 1.2em !important; 
  }

    </style>
</head>
<body>
    <div id="loading-screen" class="loading-screen" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

      
   
    
    <div class="main-container d-flex">

        <!--Sidebar-->
        <div class="sideNav" id="side_nav">
            <div class="container">
                <div class="header-box text-center px-2 pt-3 pb-4 ">
                    <button class="btn d-md-none d-block close-btn px-1 py-0 text-black"><i class="fa-solid fa-bars-staggered"></i></button>
                    <div class="avatar-placeholder">
                        <img id="client-avatar" src="" alt="loading..." width="100" height="100">

                    </div>
                    <div class="avatar-text">
                        <!-- Client ID and Name -->
                        <div id="user-name">loading...</div>
                    </div>
                    
                </div>
            </div>
            <ul class="sideBarList list-unstyled px-2">
                <li class="sideNav"><a href="clientDashboard.html" class="text-decoration-none"><i class="fa-solid fa-house"></i> Dashboard</a></li>
                <li class="sideNav"><a href="clientRequirements.html" class="text-decoration-none"><i class="fa-solid fa-list"></i> Requirements List</a></li>
                
                <li class="sideNav dropdown open">
                    <a href="#" class="text-decoration-none"><i class="fa-solid fa-newspaper"></i> Application <i class="fas fa-caret-down"></i></a>
                    <ul class="submenu list-unstyled">
                        <li class="text-center mt-2"><a href="clientBuildingPermit.html" class="text-decoration-none">Building Permit</a></li>
                        <li class="text-center mt-2"><a href="clientOccupancyApplication.html" class="text-decoration-none">Occupancy</a></li>
                        <li class="text-center mt-2"><a href="clientElectricalApplication.html" class="text-decoration-none">Electrical Inspection</a></li>
                        <li class="text-center mt-2 active"><a href="clientHousingApplication.html" class="text-decoration-none">Housing</a></li>
                    </ul>
                </li>
                <li class="sideNav"><a href="clientNotif.html" class="text-decoration-none"><i class="fa-solid fa-bell"></i> Notifications</a></li>
                <li class="sideNav" id="user-logout-btn"><a href="#" class="text-decoration-none"><i class="fa-solid fa-right-from-bracket"></i> Log out</a></li>
            </ul>
        </div>
       

        <div class="content">
           

            <!--Navigation Bar-->
<nav class="navigationBar navbar navbar-expand-lg bg-light">
    <div class="container-fluid">
        <!-- Mobile View -->
        <div class="d-flex justify-content-between d-md-none d-block">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="/resources/pictures/chsd.png" alt="CHSD" width="40" height="40" class="me-2">
                <h5 class="mb-0 fs-5">CHSD</h5>
            </a>
            <button class="btn px-1 py-0 open-btn">
                <i class="fa-solid fa-bars-staggered"></i>
            </button>
        </div>

        <!-- Desktop View -->
        <div class="collapse navbar-collapse d-none d-md-flex" id="navbarSupportedContent">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="/resources/pictures/chsd.png" alt="CHSD" width="75" height="75" class="me-2">
                <h5 class="mb-0 fs-5 fs-lg-4">City Housing and Settlements Department</h5>
            </a>
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <!-- Additional nav items go here -->
            </ul>
        </div>
    </div>
</nav>

            <div class="contentContainer">
                <div class="card text-center">
                    <div class="card-body">
                      <h5 class="card-title">Start Your Application</h5>
                      <p class="card-text">Click the button below to apply for Housing</p>
                      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#housingApplicationModal">Apply</button>
                    </div>
                  </div>
            </div>
        </div>
    </div>

   
  
    <div class="modal fade" id="housingApplicationModal" tabindex="-1" aria-labelledby="housingApplicationModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">

        <div class="modal-dialog modal-dialog-centered wide-modal">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="housingApplicationModalLabel">Housing Application</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                
                    
    
                   
                    <div class="step-progress mb-4">
                        <div class="step completed" id="step-1">
                            <div class="circle"></div>
                            <div class="label">Information of Household</div>
                        </div>
                        <div class="step" id="step-2">
                            <div class="circle"></div>
                            <div class="label">Household Members</div>
                        </div>
                        <div class="step" id="step-3">
                            <div class="circle"></div>
                            <div class="label">Lot and House Characteristics</div>
                        </div>
                    </div>
                   
                  <!-- Form Steps -->
                   <form id="housingApplicationForm">

    <div class="form-step active" id="form-step-1">
        <p>Note: Fill up all the fields to proceed to the next step.</p>
                        <p><i>Required fields are marked with <span class="required-asterisk">*</span></i></p>
        <h5>Household Head Details</h5>
        <div class="row">
            <div class="col">
                <label for="surveyNo">Survey No.</label>
                <input type="text" id="surveyNo" class="form-control" disabled>
            </div>
            <div class="col">
                <label for="dateApplied">Date<span class="required-asterisk">*</span></label>
                <input type="date" id="dateApplied" class="form-control" required>
            </div>
            <div class="col">
                <label for="barangay">Barangay<span class="required-asterisk">*</span></label>
                <select class="form-control" id="barangay" required>
                    <option value="">Select Barangay</option>
                    <option>Bagong Kalsada</option>
                    <option>Banadero</option>
                    <option>Banlic</option>
                    <option>Barandal</option>
                    <option>Bubuyan</option>
                    <option>Bucal</option>
                    <option>Bunggo</option>
                    <option>Burol</option>
                    <option>Camaligan</option>
                    <option>Canlubang</option>
                    <option>Halang</option>
                    <option>Hornalan</option>
                    <option>Kay-Anlog</option>
                    <option>Lagui-Silang</option>
                    <option>Lamesa</option>
                    <option>Lawa</option>
                    <option>Lecheria</option>
                    <option>Lingga</option>
                    <option>Looc</option>
                    <option>Mabato</option>
                    <option>Makiling</option>
                    <option>Majada Out</option>
                    <option>Mapagong</option>
                    <option>Masili</option>
                    <option>Maunong</option>
                    <option>Palingon</option>
                    <option>Paciano Rizal</option>
                    <option>Palo-Alto</option>
                    <option>Pansol</option>
                    <option>Parian</option>
                    <option>Prinza</option>
                    <option>Punta</option>
                    <option>Real</option>
                    <option>Sampiruhan</option>
                    <option>Sirang Lupa</option>
                    <option>Sucol</option>
                    <option>Turbina</option>
                    <option>Ulango</option>
                    <option>Uwisan</option>
                </select>                
                
            </div>
            <div class="col">
                <label for="sitioPurok">Sitio/Purok<span class="required-asterisk">*</span></label>
                <select class="form-control" id="sitioPurok" required>
                    <option value="">Select Purok/Sitio</option>
                    <option>Purok 1</option>
                    <option>Purok 2</option>
                    <option>Purok 3</option>
                    <option>Purok 4</option>
                    <option>Purok 5</option>
                    <option>Purok 6</option>
                    <option>Purok 7</option>
                    <option>Purok 8</option>
                    <option>Purok 9</option>
                    <option>Purok 10</option>
                    <option>Sitio Kapayapaan</option>
                    <option>Sitio Lumot</option>
                    <option>Sitio Putol</option>
                    <option>Sitio Hulo</option>
                    <option>Sitio Masaya</option>
                    <option>Sitio Sungi</option>
                    <option>Sitio Banlic</option>
                    <option>Sitio Ilaya</option>
                    <option>Sitio Calero</option>
                    <option>Sitio Masiit</option>
                    <option>Sitio Tubigan</option>
                    <option>Sitio Sibulo</option>
                    <option>Sitio Sto. Tomas</option>
                    <option>Sitio Ronggot</option> 
                </select>
            </div>
            
        </div>
    
        <div class="row">
            <div class="col-md-4">
               <label for="classificationArea">Classification Area<span class="required-asterisk">*</span></label>
               <select class="form-control" id="classificationArea" required>
                <option>Danger Zone</option>
                <option>Not Danger Zone</option>
               </select>

            </div>
            <div class="col-md-8">
               <label for="householdRemarks">Remarks</label>
               <textarea class="form-control" id="householdRemarks" rows="1" disabled>
               </textarea>
            </div>
        </div>
    
        <div class="row">
            <div class="col-md-3">
               <label for="householdBirthday">Date of Birth<span class="required-asterisk">*</span></label>
               <input type="date" class="form-control" id="householdBirthday" required>
            </div>
            <div class="col-md-3">
                <label for="householdSex">Sex<span class="required-asterisk">*</span></label>
                <select class="form-control" id="householdSex" required>
                    <option>Male</option>
                    <option>Female</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="householdCivilStatus">Civil Status<span class="required-asterisk">*</span></label>
                <select class="form-control" id="householdCivilStatus" required>
                    <option>Single</option>
                    <option>Married</option>
                    <option>Live in</option>
                    <option>Widowed</option>
                    <option>Single Parent</option>
                    <option>Separated</option>

                </select>
            </div>
        </div>
    
    
        <div class="row">
            <div class="col-md-3">
                <label for="householdLastName">Last Name<span class="required-asterisk">*</span></label>
                <input type="text" class="form-control" id="householdLastName" required>
            </div>
            <div class="col-md-3">
                <label for="householdFirstName">First Name<span class="required-asterisk">*</span></label>
                <input type="text" class="form-control" id="householdFirstName" required>
            </div>
            <div class="col-md-3">
                <label for="householdMiddleName">Middle Name</label>
                <input type="text" class="form-control" id="householdMiddleName">
            </div>
            <div class="col-md-3">
                <label for="householdMaidenName">Maiden Name</label>
                <input type="text" class="form-control" id="householdMaidenName">
            </div>
        </div>
    
        <div class="row">
           <div class="col-md-6">
            <label for="householdOccupation">Occupation<span class="required-asterisk">*</span></label>
            <input type="text" class="form-control" id="householdOccupation" required>
           </div>
    
           <div class="col-md-6">
             <label for="householdPlaceOfWork">Place Of Work<span class="required-asterisk">*</span></label>
             <input type="text" class="form-control" id="householdPlaceOfWork" required>
           </div>
        </div>
    
        <div class="row">
            <div class="col">
                <label for="householdAddress">Present Address<span class="required-asterisk">*</span></label>
                <textarea class="form-control" id="householdAddress" rows="1" required></textarea>
            </div>
        </div>
    
        <div class="row">
    
        </div>
        <div class="row">
            <div class="col-md-12">
                <!-- Checkbox to toggle spouse fields -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="hasSpouse">
                    <label class="form-check-label" for="hasSpouse">
                        Check if you have a spouse
                    </label>
                </div>
            </div>
        </div>
        
        
        <!-- Spouse fields -->
        <div class="row">
            <h5>Name of Spouse</h5>
        </div>
        <div class="row">
            <div class="col-md-3">
                <label for="spouseLastName">Last Name</label>
                <input type="text" class="form-control" id="spouseLastName" disabled>
            </div>
            <div class="col-md-3">
                <label for="spouseFirstName">First Name</label>
                <input type="text" class="form-control" id="spouseFirstName" disabled>
            </div>
            <div class="col-md-3">
                <label for="spouseMiddleName">Middle Name</label>
                <input type="text" class="form-control" id="spouseMiddleName" disabled>
            </div>
            <div class="col-md-3">
                <label for="spouseMaidenName">Maiden Name</label>
                <input type="text" class="form-control" id="spouseMaidenName" disabled>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-3">
                <label for="spouseBirthday">Date of Birth</label>
                <input type="date" class="form-control" id="spouseBirthday" disabled>
            </div>
        </div>
        
    
        <div class="row">
            <div class="col-md-4">
               <label for="classificationOfSurveyHousehold">Classification Of Survey Household<span class="required-asterisk">*</span></label>
               <select class="form-control" id="classificationOfSurveyHousehold" required>
                <option>Caretaker</option>
                <option>Co-Owner</option>
                <option>Owner</option>
                <option>Renter</option>
                <option>RFO</option>
                <option>Sharer</option>
               </select>
            </div>
            <div class="col-md-2">
                <label for="householdAmount">Amount<span class="required-asterisk">*</span></label>
                <input type="number" class="form-control" id="householdAmount" required>
            </div>
            <div class="col-md-6">
                <label for="structureOwner">Structure Owner<span class="required-asterisk">*</span></label>
                <input type="text" class="form-control" id="structureOwner" required>
            </div>
        </div>
    
        <div class="row">
            <div class="col-md-6">
                 <label for="provinceOfOrigin">Province Of Origin<span class="required-asterisk">*</span></label>
                 <input type="text" class="form-control" id="provinceOfOrigin" required>
            </div>
            <div class="col-md-3">
                <label for="householdSize">Household Size<span class="required-asterisk">*</span></label>
                <input type="number" class="form-control" id="householdSize" required>
            </div>
            <div class="col-md-3">
                <label for="yearOfResidency">Year of Residency<span class="required-asterisk">*</span></label>
                <input type="text" class="form-control" id="yearOfResidency" required>
            </div>
        </div>
    
        <div class="row">
    
            <label for="reasonsForEstablishing">Reasons For Establishing Residence In The Area<span class="required-asterisk">*</span></label>
            <select class="form-control" id="reasonsForEstablishing">
                <option>Proximity of Livelihood</option>
                <option>Rent Free or Affordable Rental Rates</option>
                <option>Acquired Right</option>
                <option>Family Ties</option>
                <option>Near School</option>
                <option>No Other Place to Go</option>
            </select>
        </div>
    
       
        
            
    
    
       
      
    
        <div class="row justify-content-end mt-4">
            <div class="col">
               
            </div>
        </div>
    </div>
    
    
                    <div class="form-step" id="form-step-2">
                        
                        
                        <h5>Household Members Information</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <label for="memberName">Name<span class="required-asterisk">*</span></label>
                                <input type="text" id="memberName" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label for="relationToHead">Relation To The Household Head<span class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" id="relationToHead" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label for="memberAge">Age<span class="required-asterisk">*</span></label>
                                <input type="number" class="form-control" id="memberAge" required>
                            </div>
                            <div class="col-md-2">
                                <label for="memberGender">Gender<span class="required-asterisk">*</span></label>
                                <select class="form-control" id="memberGender" required>
                                    <option>Male</option>
                                    <option>Female</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="memberCivilStatus">Civil Status<span class="required-asterisk">*</span></label>
                                <select class="form-control" id="memberCivilStatus" required>
                                    <option>Single</option>
                                    <option>Married</option>
                                    <option>Live in</option>
                                    <option>Widowed</option>
                                    <option>Single Parent</option>
                                    <option>Separated</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="memberEducationalAttainment">Educational Attainment<span class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" id="memberEducationalAttainment"required>
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-2">
                                <label for="memberEmployed">Employed<span class="required-asterisk">*</span></label>
                                <select class="form-control" id="memberEmployed" required>
                                    <option>Yes</option>
                                    <option>No</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="memberOccupation">Occupation<span class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" id="memberOccupation" required>
                            </div>
                            <div class="col-md-3">
                                <label for="memberPlaceOfWork">Place of Work<span class="required-asterisk">*</span></label>
                                <input type="text" class="form-control" id="memberPlaceOfWork" required>
                            </div>
                            <div class="col-md-3">
                                <label for="memberMonthlyIncome">Monthly Income(PHP)<span class="required-asterisk">*</span></label>
                                <input type="number" class="form-control" id="memberMonthlyIncome" required>
                            </div>
                            
                        </div>
    
                        <div class="row justify-content-end mt-4">
                            <div class="col">
                               
                            </div>
                        </div>
                        

                        <div id="addHouseholdLoading" class="spinner-border text-primary" role="status" style="display: none;">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        
                        <div class="row">
                            <div class="col text-end">
                                <button class="btn btn-secondary" type="button" id="addHouseholdBtn"><i class="fa-solid fa-plus"></i> Add</button>
                                <button class="btn btn-secondary" type="button" id="clearHouseholdBtn"><i class="fa-solid fa-delete-left"></i> Clear</button>
                                <button class="btn btn-secondary" type="button" id="editHouseholdBtn"><i class="fa-solid fa-pencil"></i> Edit</button>
                                <button class="btn btn-secondary" type="button" id="deleteHouseholdBtn"><i class="fa-solid fa-trash"></i> Delete</button>
                            </div>
                        </div>
    
                        <div class="contentContainer">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Relation</th>
                                        <th>Age</th>
                                        <th>Gender</th>
                                        <th>Civil Status</th>
                                        <th>Educational Attainment</th>
                                        <th>Employed</th>
                                        <th>Occupation</th>
                                        <th>Place of Work</th>
                                        <th>Monthly Income</th>
                                    </tr>
                                </thead>
                                <tbody id="householdMembersTableBody"> <!-- Added id to tbody -->
                                </tbody>
                            </table>
                        </div>
                        
                    </div>
    
                    <div class="form-step" id="form-step-3">
                        <h5>Lot Information</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <label for="lotOwner">Owner</label>
                                <input type="text" class="form-control" id="lotOwner">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label for="construction">Construction/Building Materials Used</label>
                                <select class="form-control" id="construction">
                                    <option>Concrete</option>
                                    <option>Wood/Nipa</option>
                                    <option>Plastic Roof Only</option>
                                    <option>Tent</option>
                                    <option>Mixed Materials</option>
                                    <option>Sharer</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="NOStoreys">Number Of Storeys</label>
                                <input type="number" id="NOStoreys" class="form-control">
                            </div>
                            <div class="col-md-4">
                                <label for="estimatedFloorArea">Estimated Floor Area</label>
                                <input type="number" class="form-control" id="estimatedFloorArea">
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-6">
                                <label for="comfortRoom">Comfort Room</label>
                                <select class="form-control" id="comfortRoom">
                                    <option>With Septic Tank Vault</option>
                                    <option>Without Septic</option>
                                    <option>None</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="utilities">Utilities/Facilities Present Power(Electricity)</label>
                                <select class="form-control" id="utilities">
                                    <option>Meralco</option>
                                    <option>Connected To Other Subscriber</option>
                                    <option>None</option>
                                </select>
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-6">
                                <label for="sourceOfWater">Source of Water</label>
                                <select class="form-control" id="sourceOfWater">
                                    <option value="">Select Source of Water</option>
                                    <option value="piped_water_maynilad">Piped Water (Maynilad)</option>
                                    <option value="piped_water_manila_water">Piped Water (Manila Water)</option>
                                    <option value="local_water_district">Local Water District</option>
                                    <option value="deep_well">Deep Well</option>
                                    <option value="shallow_well">Shallow Well</option>
                                    <option value="water_delivery">Water Delivery (Private Supplier)</option>
                                    <option value="communal_faucet">Communal Faucet System (Barangay/Community)</option>
                                    <option value="rainwater">Rainwater Collection</option>
                                </select>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="telephone">Telephone</label>
                                <select class="form-control" id="telephone">
                                    <option>Landline</option>
                                    <option>Cellphone</option>
                                    <option>Others</option>
                                </select>
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-6">
                                <label for="modeOfHouse">Mode Of House/Structure Acquistion</label>
                                <select class="form-control" id="modeOfHouse">
                                    <option>Sold Rights</option>
                                    <option>Transfer Rights</option>
                                    <option>Constructed</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="infoAboutLot">Information About The Surveyed Lot</label>
                                <select class="form-control" id="infoAboutLot">
                                    <option>Caretaker</option>
                                    <option>Co-Owner</option>
                                    <option>Renter</option>
                                    <option>RFO</option>
                                    <option>Sharer</option>
                                </select>
                            </div>
    
                            <div class="col-md-2">
                                <label for="amountToPay">Amount To Pay</label>
                                <input type="number" id="amountToPay" class="form-control">
                            </div>
                        </div>
    
                        <div class="row">
                            <div class="col-md-6">
                                <label for="relationshipWithOwner">Relationship With The Owner</label>
                                <select class="form-control" id="relationshipWithOwner">
                                    <option>Lot Owner</option>
                                    <option>Child</option>
                                    <option>Parent</option>
                                    <option>Relative</option>
                                    <option>Others</option>
                                </select>
                            </div>
    
                            <div class="col-md-6">
                                <label for="typeOfStructure">Type Of Structure</label>
                                <select class="form-control" id="typeOfStructure">
                                    <option>Residential</option>
                                    <option>Commercial</option>
                                    <option>Apartment</option>
                                    <option>Institution</option>
                                    <option>Others</option>
                                </select>
                            </div>
                        </div>
                       
                       
                       </form>
                    
                </div>
            </div>
            <div class="modal-footer"> 
                <button type="button" class="btn btn-primary" id="nextBtn1">Next</button>
                <button type="button" class="btn btn-secondary" id="prevBtn2" style="display:none;">Previous</button>
                <button type="button" class="btn btn-primary" id="nextBtn2" style="display:none;">Next</button>
                <button type="button" class="btn btn-secondary" id="prevBtn3" style="display:none;">Previous</button>
                <button type="button" class="btn btn-primary" id="submitBtn" style="display:none;">Submit</button>
            </div>
            
              
          </div>
        </div>
      </div>

          </div>

   <!-- Remarks Modal -->
<div class="modal fade" id="viewRemarks" tabindex="-1" aria-labelledby="remarksModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="remarksModalLabel">Remarks</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="remarks-content">
            
        </div>
      </div>
    </div>
  </div>

  <!-- Application Applied Modal -->
<div class="modal fade" id="applicationAppliedModal" tabindex="-1" aria-labelledby="ApplicationAppliedModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="ApplicationAppliedModalLabel"><i class="fa-solid fa-check-circle"></i> Success</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <h2>Application Submitted</h2>
                <i class="fa-solid fa-check-circle fa-3x text-success"></i>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Privacy Policy Modal -->
<div class="modal fade" id="privacyPolicyModal" tabindex="-1" aria-labelledby="privacyPolicyModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered wide-modal">
      <div class="modal-content johnowen">
        <div class="modal-header">
          <h5 class="modal-title" id="privacyPolicyModalLabel">Privacy Policy and Terms of Service</h5>
       
        </div>
        <div class="modal-body" id="privacyPolicyContent" style="max-height: 400px; overflow-y: auto;">
          <h5>Privacy Policy</h5>
          <p>We are committed to protecting your privacy. This privacy policy explains how we collect, use, and share your personal information when you apply for building permits through our system. By submitting your application, you consent to our privacy policy and the collection, use, and sharing of your information as described here.</p>

          <ul>
            <li><b>Information Collection:</b> We collect personal data such as name, address, phone number, email, and project details for the sole purpose of processing your building permit application.</li>
            <li><b>Use of Data:</b> The collected data is used to process your permit, communicate with you, and keep you updated on your application's status.</li>
            <li><b>Data Sharing:</b> Your data will not be shared with third parties except where required by law or necessary for completing the application process.</li>
            <li><b>Data Retention:</b> Your personal data will be retained only for as long as necessary to fulfill the purpose of the application process or as required by legal obligations.</li>
          </ul>

          <h5>Terms and Conditions</h5>
          <p>By using this service, you agree to the following terms and conditions:</p>
          <ul>
            <li>You will provide accurate and truthful information in your application.</li>
            <li>You understand that the processing of your permit may take several days depending on the complexity of the application.</li>
            <li>You are responsible for any fees or charges associated with your application.</li>
            <li>Any attempt to provide fraudulent information may result in legal consequences.</li>
          </ul>
        </div>
        <div class="modal-footer d-flex justify-content-between align-items-center">
            <div class="form-check testingPrivacy me-3">
              <input class="form-check-input" type="checkbox" id="termsCheckbox">
              <label class="form-check-label" for="termsCheckbox">
                I have read and agree to the Privacy Policy and Terms and Conditions
              </label>
            </div>
            <div>
              <a type="button" class="btn btn-secondary text-white me-2" href="clientApplication.html">Back</a>
              <button type="button" class="btn btn-primary" id="acceptPolicyButton" disabled>Proceed</button>
            </div>
          </div>
          
      </div>
    </div>
  </div>


    <!-- Firebase and custom scripts -->
    <script type="module" src="/Database/firebase.js"></script>

  
   
   
    

    <!-- Bootstrap and other scripts -->
  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <script src="/ClientPages/navBarScript.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Sidebar functionality
            var sideNav = document.getElementById('side_nav');
            var openBtn = document.querySelector('.open-btn');
            var closeBtn = document.querySelector('.close-btn');
            var dropdownItems = document.querySelectorAll('.sideNav.dropdown');
            
            // Toggle the sidebar for mobile view
            openBtn?.addEventListener('click', function() {
                sideNav.classList.add('active');
            });
            
            closeBtn?.addEventListener('click', function() {
                sideNav.classList.remove('active');
            });
            
            // Handle dropdown in sidebar
            dropdownItems.forEach(function(item) {
                item.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevents clicks from closing the sidebar
                    this.classList.toggle('open');
                });
            });
            
            // Close the sidebar when clicking outside of it (optional)
            document.addEventListener('click', function(e) {
                if (!sideNav.contains(e.target) && !openBtn.contains(e.target)) {
                    sideNav.classList.remove('active');
                }
            });
        
            // Function to clear the active state from all steps
            function clearActiveStates() {
                var allSteps = document.querySelectorAll('.step');
                allSteps.forEach(function(step) {
                    step.classList.remove('active');  // Remove the active class from all steps
                });
            }
        
            // Function to show the next form step and update the progress bar
            function showNextStep(currentStep, nextStep) {
                var currentFormStep = document.getElementById(`form-step-${currentStep}`);
                var nextFormStep = document.getElementById(`form-step-${nextStep}`);
                var currentStepIndicator = document.getElementById(`step-${currentStep}`);
                var nextStepIndicator = document.getElementById(`step-${nextStep}`);
        
                if (currentFormStep && nextFormStep) {
                    // Hide the current form step
                    currentFormStep.classList.remove('active');
                    // Show the next form step
                    nextFormStep.classList.add('active');
        
                    // Mark the current step as completed and not active anymore
                    if (currentStepIndicator) {
                        currentStepIndicator.classList.add('completed');
                        currentStepIndicator.classList.remove('active');
                    }
        
                    // Clear the active state of all steps
                    clearActiveStates();
        
                    // Mark the next step as active
                    if (nextStepIndicator) {
                        nextStepIndicator.classList.add('active');
                    }
                }
        
                // Handle button visibility
                handleButtonVisibility(nextStep);
            }
        
            // Function to show the previous form step and update the progress bar
            function showPreviousStep(currentStep, prevStep) {
                var currentFormStep = document.getElementById(`form-step-${currentStep}`);
                var prevFormStep = document.getElementById(`form-step-${prevStep}`);
                var currentStepIndicator = document.getElementById(`step-${currentStep}`);
                var prevStepIndicator = document.getElementById(`step-${prevStep}`);
        
                if (currentFormStep && prevFormStep) {
                    // Hide the current form step
                    currentFormStep.classList.remove('active');
                    // Show the previous form step
                    prevFormStep.classList.add('active');
        
                    // Clear the active state of all steps
                    clearActiveStates();
        
                    // Mark the previous step as active
                    if (prevStepIndicator) {
                        prevStepIndicator.classList.add('active');
                    }
        
                    // Do not remove the completed class, only remove active class from the current step
                    if (currentStepIndicator) {
                        currentStepIndicator.classList.remove('active');
                    }
                }
        
                // Handle button visibility
                handleButtonVisibility(prevStep);
            }
        
            // Function to control the visibility of the buttons based on the current step
            function handleButtonVisibility(step) {
                document.getElementById('nextBtn1').style.display = 'none';
                document.getElementById('prevBtn2').style.display = 'none';
                document.getElementById('nextBtn2').style.display = 'none';
                document.getElementById('prevBtn3').style.display = 'none';
                document.getElementById('submitBtn').style.display = 'none';
        
                if (step === 1) {
                    document.getElementById('nextBtn1').style.display = 'inline-block';
                } else if (step === 2) {
                    document.getElementById('prevBtn2').style.display = 'inline-block';
                    document.getElementById('nextBtn2').style.display = 'inline-block';
                } else if (step === 3) {
                    document.getElementById('prevBtn3').style.display = 'inline-block';
                    document.getElementById('submitBtn').style.display = 'inline-block';
                }
            }
        
            // Form validation logic
            const requiredFields = [
                document.getElementById('dateApplied'),
                document.getElementById('barangay'),
                document.getElementById('sitioPurok'),
                document.getElementById('classificationArea'),
                document.getElementById('householdBirthday'),
                document.getElementById('householdCivilStatus'),
                document.getElementById('householdLastName'),
                document.getElementById('householdFirstName'),
                document.getElementById('householdOccupation'),
                document.getElementById('householdPlaceOfWork'),
                document.getElementById('householdAddress'),
                document.getElementById('householdSex'),
                document.getElementById('classificationOfSurveyHousehold'),
                document.getElementById('householdAmount'),
                document.getElementById('structureOwner'),
                document.getElementById('provinceOfOrigin'),
                document.getElementById('householdSize'),
                document.getElementById('yearOfResidency'),
                document.getElementById('reasonsForEstablishing')
            ];
        
            const nextBtn1 = document.getElementById('nextBtn1');
            nextBtn1.disabled = true; // Disable button initially
        
            // Function to check if all required fields are filled
            function checkFormValidity() {
                const allFilled = requiredFields.every(input => input.value.trim() !== '');
                nextBtn1.disabled = !allFilled; // Enable button only if all fields are filled
            }
        
            // Attach event listeners to all required fields
            requiredFields.forEach(field => {
                field.addEventListener('input', checkFormValidity); // Check on every input change
            });
        
            // Event Listeners for the buttons
            document.getElementById('nextBtn1').addEventListener('click', function() {
                showNextStep(1, 2); // Move from step 1 to step 2
            });
        
            document.getElementById('nextBtn2').addEventListener('click', function() {
                showNextStep(2, 3); // Move from step 2 to step 3
            });
        
            document.getElementById('prevBtn2').addEventListener('click', function() {
                showPreviousStep(2, 1); // Move from step 2 back to step 1
            });
        
            document.getElementById('prevBtn3').addEventListener('click', function() {
                showPreviousStep(3, 2); // Move from step 3 back to step 2
            });
        });
        </script>
        



        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
            import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
            import { getFirestore, collection, addDoc, updateDoc, doc, arrayUnion, Timestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        
            // Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyBhvoPidRWGeJmnN2E11SBS5n8oyxVLJ0M",
                authDomain: "chsd-mis.firebaseapp.com",
                projectId: "chsd-mis",
                storageBucket: "chsd-mis.appspot.com",
                messagingSenderId: "694967679357",
                appId: "1:694967679357:web:65cffd50f13739f934f414",
                measurementId: "G-XBQTQFRLJ5"
            };
        
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
        
            // Declare the householdMembers array to store all household members from step 2
            let householdMembers = [];
        
            // Input fields for household members
            const memberNameInput = document.getElementById('memberName');
            const relationToHeadInput = document.getElementById('relationToHead');
            const memberAgeInput = document.getElementById('memberAge');
            const memberGenderInput = document.getElementById('memberGender');
            const memberCivilStatusInput = document.getElementById('memberCivilStatus');
            const memberEducationalAttainmentInput = document.getElementById('memberEducationalAttainment');
            const memberEmployedInput = document.getElementById('memberEmployed');
            const memberOccupationInput = document.getElementById('memberOccupation');
            const memberPlaceOfWorkInput = document.getElementById('memberPlaceOfWork');
            const memberMonthlyIncomeInput = document.getElementById('memberMonthlyIncome');
            const tableBody = document.getElementById('householdMembersTableBody');
        
            // Loading spinner for household member addition
            const addMemberLoadingSpinner = document.getElementById('addHouseholdLoading');
        
            // Function to add household member
            function addHouseholdMember(e) {
                // Prevent form submission behavior
                e.preventDefault();
                e.stopPropagation();
        
                // Show loading spinner
                addMemberLoadingSpinner.style.display = 'inline-block';
        
                const member = {
                    name: memberNameInput.value,
                    relation: relationToHeadInput.value,
                    age: memberAgeInput.value,
                    gender: memberGenderInput.value,
                    civilStatus: memberCivilStatusInput.value,
                    education: memberEducationalAttainmentInput.value,
                    employed: memberEmployedInput.value,
                    occupation: memberOccupationInput.value,
                    placeOfWork: memberPlaceOfWorkInput.value,
                    income: memberMonthlyIncomeInput.value,
                };
        
                // Validate required fields
                if (!member.name || !member.relation || !member.age || !member.gender) {
                    alert('Please fill in all required fields.');
                    addMemberLoadingSpinner.style.display = 'none';
                    return;
                }
        
                // Add the new member to the householdMembers array
                householdMembers.push(member);
        
                // Append the new household member to the table
                appendHouseholdMemberRow(member);
        
                // Clear input fields after adding
                clearHouseholdMemberInputs();
        
                // Hide the loading spinner
                setTimeout(() => {
                    addMemberLoadingSpinner.style.display = 'none';
                }, 500);
            }
        
            // Function to append the new household member to the table without reloading
            function appendHouseholdMemberRow(member) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${member.name}</td>
                    <td>${member.relation}</td>
                    <td>${member.age}</td>
                    <td>${member.gender}</td>
                    <td>${member.civilStatus}</td>
                    <td>${member.education}</td>
                    <td>${member.employed}</td>
                    <td>${member.occupation}</td>
                    <td>${member.placeOfWork}</td>
                    <td>${member.income}</td>
                `;
                tableBody.appendChild(row);
            }
        
            // Function to clear input fields
            function clearHouseholdMemberInputs() {
                memberNameInput.value = '';
                relationToHeadInput.value = '';
                memberAgeInput.value = '';
                memberGenderInput.value = '';
                memberCivilStatusInput.value = '';
                memberEducationalAttainmentInput.value = '';
                memberEmployedInput.value = '';
                memberOccupationInput.value = '';
                memberPlaceOfWorkInput.value = '';
                memberMonthlyIncomeInput.value = '';
            }
        
            // Add event listener to the "Add" button to trigger the add household member function
            document.getElementById('addHouseholdBtn').addEventListener('click', function (e) {
                addHouseholdMember(e); // Call the function to add the member and stop form submission
            });
        
            // Function to handle Step 3 (Lot and House Characteristics)
            async function addLotAndHouseDetails() {
                const lotOwner = document.getElementById('lotOwner').value;
                const construction = document.getElementById('construction').value;
                const NOStoreys = document.getElementById('NOStoreys').value;
                const estimatedFloorArea = document.getElementById('estimatedFloorArea').value;
                const comfortRoom = document.getElementById('comfortRoom').value;
                const utilities = document.getElementById('utilities').value;
                const sourceOfWater = document.getElementById('sourceOfWater').value;
                const telephone = document.getElementById('telephone').value;
                const modeOfHouse = document.getElementById('modeOfHouse').value;
                const infoAboutLot = document.getElementById('infoAboutLot').value;
                const amountToPay = document.getElementById('amountToPay').value;
                const relationshipWithOwner = document.getElementById('relationshipWithOwner').value;
                const typeOfStructure = document.getElementById('typeOfStructure').value;
        
                // Validate required fields
                if (!lotOwner || !NOStoreys || !estimatedFloorArea) {
                    alert('Please fill in all required fields in the Lot and House Characteristics section.');
                    return;
                }
        
                return {
                    lotOwner,
                    construction,
                    NOStoreys,
                    estimatedFloorArea,
                    comfortRoom,
                    utilities,
                    sourceOfWater,
                    telephone,
                    modeOfHouse,
                    infoAboutLot,
                    amountToPay,
                    relationshipWithOwner,
                    typeOfStructure
                };
            }
        
            // Add event listener to the submit button to trigger the form submission
            document.getElementById('submitBtn').addEventListener('click', addHousingApplication);
        
            async function addHousingApplication(event) {
                event.preventDefault();
        
                // Show the loading screen
                document.getElementById('loading-screen').style.display = 'flex';
        
                setTimeout(async () => {
                    // Gather Step 1 data (Household Head Details)
                    const surveyNo = document.getElementById('surveyNo').value;
                    const dateApplied = document.getElementById('dateApplied').value;
                    const barangay = document.getElementById('barangay').value;
                    const sitioPurok = document.getElementById('sitioPurok').value;
                    const classificationArea = document.getElementById('classificationArea').value;
                    const householdRemarks = document.getElementById('householdRemarks').value;
                    const householdBirthday = document.getElementById('householdBirthday').value;
                    const householdSex = document.getElementById('householdSex').value;
                    const householdCivilStatus = document.getElementById('householdCivilStatus').value;
                    const householdLastName = document.getElementById('householdLastName').value;
                    const householdFirstName = document.getElementById('householdFirstName').value;
                    const householdMiddleName = document.getElementById('householdMiddleName').value;
                    const householdMaidenName = document.getElementById('householdMaidenName').value;
                    const householdOccupation = document.getElementById('householdOccupation').value;
                    const householdPlaceOfWork = document.getElementById('householdPlaceOfWork').value;
                    const householdAddress = document.getElementById('householdAddress').value;
        
                    // Spouse information (optional)
                    const spouseLastName = document.getElementById('spouseLastName').value;
                    const spouseFirstName = document.getElementById('spouseFirstName').value;
                    const spouseMiddleName = document.getElementById('spouseMiddleName').value;
                    const spouseMaidenName = document.getElementById('spouseMaidenName').value;
                    const spouseBirthday = document.getElementById('spouseBirthday').value;
        
                    // Additional Step 1 details
                    const classificationOfSurveyHousehold = document.getElementById('classificationOfSurveyHousehold').value;
                    const householdAmount = document.getElementById('householdAmount').value;
                    const structureOwner = document.getElementById('structureOwner').value;
                    const provinceOfOrigin = document.getElementById('provinceOfOrigin').value;
                    const householdSize = document.getElementById('householdSize').value;
                    const yearOfResidency = document.getElementById('yearOfResidency').value;
                    const reasonsForEstablishing = document.getElementById('reasonsForEstablishing').value;
        
                    const householdHeadName = `${householdLastName} ${householdFirstName} ${householdMiddleName} ${householdMaidenName}`;
        
                    // Step 3: Lot and House Details
                    const lotHouseDetails = await addLotAndHouseDetails();
        
                    try {
                        const user = auth.currentUser;
                        if (!user) {
                            console.error("No user logged in.");
                            return;
                        }
        
                        // Include household members from Step 2
                        if (householdMembers.length === 0) {
                            alert("Please add at least one household member.");
                            return;
                        }
        
                        const housingDocRef = await addDoc(collection(db, "Housing"), {
                            surveyNo,
                            dateApplied,
                            barangay,
                            sitioPurok,
                            classificationArea,
                            householdRemarks,
                            householdBirthday,
                            householdSex,
                            householdCivilStatus,
                            householdHeadName,
                            householdOccupation,
                            householdPlaceOfWork,
                            householdAddress,
                            spouseName: `${spouseLastName} ${spouseFirstName} ${spouseMiddleName} ${spouseMaidenName}`,
                            spouseBirthday,
                            classificationOfSurveyHousehold,
                            householdAmount,
                            structureOwner,
                            provinceOfOrigin,
                            householdSize,
                            yearOfResidency,
                            reasonsForEstablishing,
                            householdMembers, // Added the household members array here
                            ...lotHouseDetails, // Added the lot and house details here
                            ownerUid: user.uid,
                            status: 'Pending',
                            createdAt: Timestamp.now(),
                        });
        
                        // Update user's housing applications with reference to this new housing application
                        await updateDoc(doc(db, 'users', user.uid), {
                            housingApplications: arrayUnion({
                                applicationId: housingDocRef.id,
                                surveyNo,
                                status: 'Pending',
                            }),
                        });
        
                        // Hide the modal and show success
                        const housingModal = bootstrap.Modal.getInstance(document.getElementById('housingApplicationModal'));
                        housingModal.hide();
        
                        const applicationModal = new bootstrap.Modal(document.getElementById('applicationAppliedModal'));
                        applicationModal.show();
        
                    } catch (error) {
                        console.error("Error submitting housing application:", error);
                        alert("Failed to submit application. Please try again later.");
                    } finally {
                        document.getElementById('loading-screen').style.display = 'none';
                    }
                }, 100);
            }
        </script>
        
        
        <!--Spouse Checkbox Script-->
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const spouseFields = [
                    document.getElementById("spouseLastName"),
                    document.getElementById("spouseFirstName"),
                    document.getElementById("spouseMiddleName"),
                    document.getElementById("spouseMaidenName"),
                    document.getElementById("spouseBirthday")
                ];
        
                const hasSpouseCheckbox = document.getElementById("hasSpouse");
        
                function toggleSpouseFields() {
                    const isChecked = hasSpouseCheckbox.checked;
                    spouseFields.forEach(field => {
                        field.disabled = !isChecked;
                    });
                }
        
                hasSpouseCheckbox.addEventListener("change", toggleSpouseFields);
            });
        </script>
        
        
<script>
    
    document.addEventListener("DOMContentLoaded", function () {
    // Set the default value for "Date Applied" to today's date
    const dateAppliedInput = document.getElementById("dateApplied");
    const today = new Date().toISOString().split('T')[0];
    dateAppliedInput.value = today;

    // Disable future dates and the current date for the household birthday and spouse birthday
    const householdBirthdayInput = document.getElementById("householdBirthday");
    const spouseBirthdayInput = document.getElementById("spouseBirthday");
    const minAgeDate = new Date();
    minAgeDate.setFullYear(minAgeDate.getFullYear() - 18); // At least 18 years old
    
    // Setting the max date for birthdates to ensure 18+ age
    const maxDate = minAgeDate.toISOString().split('T')[0];
    householdBirthdayInput.max = maxDate;
    spouseBirthdayInput.max = maxDate;
    
    // Disable today and future dates for the household and spouse birthday
    householdBirthdayInput.setAttribute('max', maxDate);
    spouseBirthdayInput.setAttribute('max', maxDate);

    // Enable or disable spouse fields based on the "hasSpouse" checkbox
    const hasSpouseCheckbox = document.getElementById("hasSpouse");
    const spouseFields = [
        document.getElementById("spouseLastName"),
        document.getElementById("spouseFirstName"),
        document.getElementById("spouseMiddleName"),
        document.getElementById("spouseMaidenName"),
        document.getElementById("spouseBirthday")
    ];

    hasSpouseCheckbox.addEventListener("change", function () {
        spouseFields.forEach(field => {
            field.disabled = !hasSpouseCheckbox.checked;
        });
    });
});

    </script>


    
    </body>
    </html>